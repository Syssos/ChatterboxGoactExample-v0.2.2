{"ast":null,"code":"var _jsxFileName = \"/home/cody/Desktop/goact-0.2.2/goactexample/src/chatfooter/ChatWindow/Chatterbox/chatterbox.jsx\";\nimport React, { Component } from \"react\";\nimport { connect, sendMsg } from \"./api\";\nimport ChatHistory from './ChatHistory';\nimport MessageField from './MessageField';\nimport LoginForm from './LoginForm';\nimport \"./chatterbox.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction getCookie(name) {\n  var dc = document.cookie;\n  var prefix = name + \"=\";\n  var begin = dc.indexOf(\"; \" + prefix);\n\n  if (begin === -1) {\n    begin = dc.indexOf(prefix);\n    if (begin !== 0) return null;\n  } else {\n    begin += 2;\n    var end = document.cookie.indexOf(\";\", begin);\n\n    if (end === -1) {\n      end = dc.length;\n    }\n  } // because unescape has been deprecated, replaced with decodeURI\n  //return unescape(dc.substring(begin + prefix.length, end));\n\n\n  return decodeURI(dc.substring(begin + prefix.length, end));\n}\n\nclass Chatterbox extends Component {\n  constructor(props) {\n    super(props); // Creating single chat history instance\n\n    this.state = {\n      chatHistory: []\n    };\n  } // Connecting to websocket\n\n\n  componentDidMount() {\n    connect(msg => {\n      // Adding msg to chat history\n      this.setState(prevState => ({\n        chatHistory: [...this.state.chatHistory, msg]\n      }));\n    });\n  }\n\n  send(event) {\n    // Checking if enter was pressed\n    if (event.keyCode === 13) {\n      sendMsg(event.target.value);\n      event.target.value = \"\";\n    }\n  }\n\n  render() {\n    if (!getCookie(\"token\")) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Chatterbox\",\n      children: /*#__PURE__*/_jsxDEV(LoginForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 65\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 37\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Chatterbox\",\n      children: [/*#__PURE__*/_jsxDEV(ChatHistory, {\n        chatHistory: this.state.chatHistory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MessageField, {\n        send: this.send\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Chatterbox;","map":{"version":3,"sources":["/home/cody/Desktop/goact-0.2.2/goactexample/src/chatfooter/ChatWindow/Chatterbox/chatterbox.jsx"],"names":["React","Component","connect","sendMsg","ChatHistory","MessageField","LoginForm","getCookie","name","dc","document","cookie","prefix","begin","indexOf","end","length","decodeURI","substring","Chatterbox","constructor","props","state","chatHistory","componentDidMount","msg","setState","prevState","send","event","keyCode","target","value","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,OAAjC;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,OAAO,kBAAP;;;AAGA,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AACvB,MAAIC,EAAE,GAAGC,QAAQ,CAACC,MAAlB;AACA,MAAIC,MAAM,GAAGJ,IAAI,GAAG,GAApB;AACA,MAAIK,KAAK,GAAGJ,EAAE,CAACK,OAAH,CAAW,OAAOF,MAAlB,CAAZ;;AACA,MAAIC,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdA,IAAAA,KAAK,GAAGJ,EAAE,CAACK,OAAH,CAAWF,MAAX,CAAR;AACA,QAAIC,KAAK,KAAK,CAAd,EAAiB,OAAO,IAAP;AACpB,GAHD,MAKA;AACIA,IAAAA,KAAK,IAAI,CAAT;AACA,QAAIE,GAAG,GAAGL,QAAQ,CAACC,MAAT,CAAgBG,OAAhB,CAAwB,GAAxB,EAA6BD,KAA7B,CAAV;;AACA,QAAIE,GAAG,KAAK,CAAC,CAAb,EAAgB;AAChBA,MAAAA,GAAG,GAAGN,EAAE,CAACO,MAAT;AACC;AACJ,GAfsB,CAgBvB;AACA;;;AACA,SAAOC,SAAS,CAACR,EAAE,CAACS,SAAH,CAAaL,KAAK,GAAGD,MAAM,CAACI,MAA5B,EAAoCD,GAApC,CAAD,CAAhB;AACD;;AAED,MAAMI,UAAN,SAAyBlB,SAAzB,CAAmC;AACjCmB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN,EADiB,CAEjB;;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE;AADF,KAAb;AAGD,GAPgC,CASjC;;;AACAC,EAAAA,iBAAiB,GAAG;AAClBtB,IAAAA,OAAO,CAAEuB,GAAD,IAAS;AACf;AACA,WAAKC,QAAL,CAAcC,SAAS,KAAK;AAC1BJ,QAAAA,WAAW,EAAE,CAAC,GAAG,KAAKD,KAAL,CAAWC,WAAf,EAA4BE,GAA5B;AADa,OAAL,CAAvB;AAGD,KALM,CAAP;AAMD;;AAEDG,EAAAA,IAAI,CAACC,KAAD,EAAQ;AACV;AACA,QAAGA,KAAK,CAACC,OAAN,KAAkB,EAArB,EAAyB;AACvB3B,MAAAA,OAAO,CAAC0B,KAAK,CAACE,MAAN,CAAaC,KAAd,CAAP;AACAH,MAAAA,KAAK,CAACE,MAAN,CAAaC,KAAb,GAAqB,EAArB;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,QAAG,CAAC1B,SAAS,CAAC,OAAD,CAAb,EAAwB,oBAAQ;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,6BAA4B,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAA5B;AAAA;AAAA;AAAA;AAAA,YAAR;AAExB,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACE,QAAC,WAAD;AAAa,QAAA,WAAW,EAAE,KAAKe,KAAL,CAAWC;AAArC;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,YAAD;AAAc,QAAA,IAAI,EAAE,KAAKK;AAAzB;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AApCgC;;AAuCnC,eAAeT,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect, sendMsg } from \"./api\";\n\nimport ChatHistory from './ChatHistory';\nimport MessageField from './MessageField';\nimport LoginForm from './LoginForm';\n\nimport \"./chatterbox.css\";\n\n\nfunction getCookie(name) {\n  var dc = document.cookie;\n  var prefix = name + \"=\";\n  var begin = dc.indexOf(\"; \" + prefix);\n  if (begin === -1) {\n      begin = dc.indexOf(prefix);\n      if (begin !== 0) return null;\n  }\n  else\n  {\n      begin += 2;\n      var end = document.cookie.indexOf(\";\", begin);\n      if (end === -1) {\n      end = dc.length;\n      }\n  }\n  // because unescape has been deprecated, replaced with decodeURI\n  //return unescape(dc.substring(begin + prefix.length, end));\n  return decodeURI(dc.substring(begin + prefix.length, end));\n}\n\nclass Chatterbox extends Component {\n  constructor(props) {\n    super(props);\n    // Creating single chat history instance\n    this.state = {\n      chatHistory: []\n    }\n  }\n\n  // Connecting to websocket\n  componentDidMount() {\n    connect((msg) => {\n      // Adding msg to chat history\n      this.setState(prevState => ({\n        chatHistory: [...this.state.chatHistory, msg]\n      }))\n    });\n  }\n\n  send(event) {\n    // Checking if enter was pressed\n    if(event.keyCode === 13) {\n      sendMsg(event.target.value);\n      event.target.value = \"\";\n    }\n  }\n\n  render() {\n    if(!getCookie(\"token\")) return (<div className=\"Chatterbox\"><LoginForm /></div>);\n\n    return (\n      <div className=\"Chatterbox\">\n        <ChatHistory chatHistory={this.state.chatHistory} />\n        <MessageField send={this.send} />\n      </div>\n      );\n  };\n}\n\nexport default Chatterbox;"]},"metadata":{},"sourceType":"module"}